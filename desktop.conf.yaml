# These configurations expect the user to be running X #

- defaults:
    link:
        create: true
        relink: true

# include common config
- shell:
    - 
        command: ./install common.conf.yaml
        stdout: true

# Scripts
- link:
    ~/scripts/rofi_spellcheck.sh:
        path: desktop/scripts/rofi_spellcheck.sh
    ~/scripts/rofi_gmusic.sh:
        path: desktop/scripts/rofi_gmusic/rofi_select_song.sh
    ~/scripts/pass-rofi.sh:
        path: desktop/gpg/scripts/pass-rofi.sh

# Mpd
- link:
    ~/.config/mpd:
        path: desktop/mpd

# Dunst
- link:
    ~/.config/dunst:
        path: desktop/dunst

# Fonts
- shell:
    - 
        command: ./desktop/fonts/powerline/install.sh
        stdout: true

# GPG
- shell:
    - mkdir -p "$HOME/.gnupg"
    - cat "desktop/gpg/.gnupg/gpg-agent.conf" >> "$HOME/.gnupg/gpg-agent.conf"
    - sed -i "s~\$HOME~$HOME~" "$HOME/.gnupg/gpg-agent.conf"
- link:
    ~/scripts/pinentry-rofi.sh:
        path: desktop/gpg/scripts/pinentry-rofi.sh

# Qutebrowser
- link:
    ~/.config/qutebrowser/config.py:
        path: desktop/qutebrowser/config.py
    ~/.config/qutebrowser/keys.yaml:
        path: desktop/qutebrowser/keys.yaml

# VSCode
- link:
    ~/.config/Code/User/settings.json:
        path: desktop/vscode/settings.json
- shell:
    - [which code && cat desktop/vscode/extensions | xargs -L 1 code --install-extension,
    "Installing VSCode Extensions"]

# Zsh
- link: 
    ~/.zprofile:
        path: desktop/zsh/.zprofile

# Xresources. NOTE: This must come before anything that adds to Xresources
- shell:
    - mkdir -p $HOME/.config/X
    - cp desktop/X/.Xresources $HOME/.config/X/.Xresources
- link:
    ~/.Xresources: 
        path: $HOME/.config/X/.Xresources

# URxvt
- shell:
    - [cat desktop/urxvt/.Xresources >> $HOME/.config/X/.Xresources, 
        Adding URxvt to .Xresources]

# Rofi
- shell:
    - [cat desktop/rofi/.Xresources >> $HOME/.config/X/.Xresources,
        Adding rofi to .Xresources]